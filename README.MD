# ğŸ Python Bootstrap

MicroserviÃ§o em **Python 3.12** utilizando **FastAPI**, parte do ecossistema GitOps Java/Python. 

## ğŸš€ Tecnologias
* **Linguagem:** Python 3.12
* **Framework:** FastAPI (Uvicorn)
* **Health Checks:** CompatÃ­veis com Spring Actuator (`/actuator/health`)
* **Deploy:** ArgoCD + Helm (k8s-helm-templates)

## ğŸ—ï¸ IntegraÃ§Ã£o GitOps
Este repositÃ³rio fornece a imagem Docker que Ã© consumida pelo repositÃ³rio [python-bootstrap-infra](LINK_PARA_SEU_REPO_INFRA).

* **Porta Interna:** 8080 (Padronizada para o template Helm)
* **Imagem:** `ghcr.io/rg-hermann/python-bootstrap`

## ğŸ› ï¸ Como executar localmente

### PrÃ©-requisitos
- Python 3.12+
- pip/venv

### Passos

1. **Clonar o repositÃ³rio:**
   ```bash
   git clone https://github.com/rg-hermann/python-bootstrap.git
   cd python-bootstrap
   ```

2. **Criar e ativar ambiente virtual:**
   ```bash
   python3 -m venv venv
   source venv/bin/activate  # Linux/Mac
   # ou
   .\venv\Scripts\activate   # Windows
   ```

3. **Instalar dependÃªncias:**
   ```bash
   pip install -r requirements.txt
   ```

4. **Rodar a aplicaÃ§Ã£o:**
   ```bash
   python -m uvicorn app.main:app --host 0.0.0.0 --port 8081 --reload
   ```
   
   A app estarÃ¡ disponÃ­vel em: `http://localhost:8081`

5. **Testar os endpoints:**
   ```bash
   # Endpoint raiz
   curl http://localhost:8081/
   
   # Liveness probe (Kubernetes)
   curl http://localhost:8081/actuator/health/liveness
   
   # Readiness probe (Kubernetes)
   curl http://localhost:8081/actuator/health/readiness
   
   # Health check customizado
   curl http://localhost:8081/health
   ```

   **Respostas esperadas:**
   ```json
   {"message": "Hello from Python running on GitOps!", "service": "python-bootstrap"}
   {"status": "UP"}
   ```

## ğŸ“š Estrutura do Projeto

```
python-bootstrap/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # AplicaÃ§Ã£o FastAPI
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ routes.py          # Rotas da API
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ config.py          # ConfiguraÃ§Ãµes (Pydantic)
â”œâ”€â”€ tests/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.MD
```

## ğŸ³ Docker

### Build local

```bash
docker build -t python-bootstrap:latest .
```

### Rodar container

```bash
docker run -p 8080:8080 python-bootstrap:latest
```

Acesse em: `http://localhost:8080`

## ğŸ”— IntegraÃ§Ã£o GitOps

Este repositÃ³rio Ã© consumido pelo [python-bootstrap-infra](https://github.com/rg-hermann/python-bootstrap-infra):

- **Imagem:** `ghcr.io/rg-hermann/python-bootstrap`
- **Porta:** 8080 (padrÃ£o do template Helm)
- **Deploy:** ArgoCD sincroniza automaticamente as mudanÃ§as

### Fluxo CI/CD
1. CÃ³digo Ã© commitado neste repo
2. GitHub Actions faz build da imagem Docker
3. Push para GHCR (`ghcr.io/rg-hermann/python-bootstrap`)
4. ArgoCD detecta nova imagem e sincroniza em K8s

## ğŸ§ª Testes

```bash
python -m pytest tests/
```

## ğŸ“ VariÃ¡veis de Ambiente

Configure via `.env`:
```ini
DEBUG=false
APP_NAME=Python Bootstrap Service
```

## ğŸš€ Deploy em Kubernetes

Veja instruÃ§Ãµes no repositÃ³rio [python-bootstrap-infra](https://github.com/rg-hermann/python-bootstrap-infra).

## ğŸ“„ LicenÃ§a

MIT